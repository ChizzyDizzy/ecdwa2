apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudretail-config
  namespace: cloudretail
  labels:
    app: cloudretail
    environment: production
data:
  # Global Configuration
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # Service Ports
  USER_SERVICE_PORT: "3001"
  PRODUCT_SERVICE_PORT: "3002"
  ORDER_SERVICE_PORT: "3003"
  INVENTORY_SERVICE_PORT: "3004"
  PAYMENT_SERVICE_PORT: "3005"
  EVENT_BUS_PORT: "4000"
  API_GATEWAY_PORT: "8080"

  # Database Configuration
  DB_PORT: "5432"
  DB_USER: "postgres"

  # Database Names
  DB_NAME_USERS: "cloudretail_users"
  DB_NAME_PRODUCTS: "cloudretail_products"
  DB_NAME_ORDERS: "cloudretail_orders"
  DB_NAME_INVENTORY: "cloudretail_inventory"
  DB_NAME_PAYMENTS: "cloudretail_payments"

  # Database Hosts (StatefulSet)
  DB_HOST_USERS: "postgres-users-0.postgres-users.cloudretail.svc.cluster.local"
  DB_HOST_PRODUCTS: "postgres-products-0.postgres-products.cloudretail.svc.cluster.local"
  DB_HOST_ORDERS: "postgres-orders-0.postgres-orders.cloudretail.svc.cluster.local"
  DB_HOST_INVENTORY: "postgres-inventory-0.postgres-inventory.cloudretail.svc.cluster.local"
  DB_HOST_PAYMENTS: "postgres-payments-0.postgres-payments.cloudretail.svc.cluster.local"

  # Redis Configuration
  REDIS_URL: "redis://redis.cloudretail.svc.cluster.local:6379"
  REDIS_HOST: "redis.cloudretail.svc.cluster.local"
  REDIS_PORT: "6379"

  # Kafka Configuration
  KAFKA_BROKERS: "kafka-0.kafka.cloudretail.svc.cluster.local:9092,kafka-1.kafka.cloudretail.svc.cluster.local:9092,kafka-2.kafka.cloudretail.svc.cluster.local:9092"
  KAFKA_CLIENT_ID: "cloudretail"
  KAFKA_GROUP_ID: "cloudretail-consumer-group"
  USE_KAFKA: "true"
  ZOOKEEPER_CONNECT: "zookeeper-0.zookeeper.cloudretail.svc.cluster.local:2181,zookeeper-1.zookeeper.cloudretail.svc.cluster.local:2181,zookeeper-2.zookeeper.cloudretail.svc.cluster.local:2181"

  # Service URLs (Internal)
  USER_SERVICE_URL: "http://user-service.cloudretail.svc.cluster.local:3001"
  PRODUCT_SERVICE_URL: "http://product-service.cloudretail.svc.cluster.local:3002"
  ORDER_SERVICE_URL: "http://order-service.cloudretail.svc.cluster.local:3003"
  INVENTORY_SERVICE_URL: "http://inventory-service.cloudretail.svc.cluster.local:3004"
  PAYMENT_SERVICE_URL: "http://payment-service.cloudretail.svc.cluster.local:3005"
  EVENT_BUS_URL: "http://event-bus.cloudretail.svc.cluster.local:4000/events"

  # CORS Configuration
  ALLOWED_ORIGINS: "https://cloudretail.example.com,https://www.cloudretail.example.com"

  # Health Check Configuration
  HEALTH_CHECK_INTERVAL: "30s"
  HEALTH_CHECK_TIMEOUT: "5s"
  HEALTH_CHECK_RETRIES: "3"

  # Rate Limiting
  RATE_LIMIT_WINDOW_MS: "60000"
  RATE_LIMIT_MAX_REQUESTS: "100"

  # Cache Configuration
  CACHE_TTL: "3600"
  CACHE_CHECK_PERIOD: "600"

  # Monitoring
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"

  # Multi-region Configuration
  REGION: "ap-southeast-1"
  AVAILABILITY_ZONE: "ap-southeast-1a"
  CLUSTER_NAME: "cloudretail-prod"
